(function(window){var kzsdk={};var ua=navigator.userAgent;kzsdk.version="1.2";kzsdk.plugins={};kzsdk.is_ios=/KuaiZhaniOSSite/gi.test(ua);kzsdk.is_android=/KuaiZhanAndroidWrapper/gi.test(ua);if(kzsdk.is_ios||kzsdk.is_android)kzsdk.app_version=/KuaiZhan\w+\/([1-9.]+)/gi.exec(ua)[0];kzsdk.add_plugin=function(plantform,name,plugin){if(plantform=="ios"&&kzsdk.is_ios||plantform=="android"&&kzsdk.is_android){kzsdk.plugins[name]=plugin;return true}return false};kzsdk.is_debug=false;kzsdk.debug=function(message){if(kzsdk.is_debug){alert(message)}else{console&&console.log(message)}};kzsdk.ready=function(prarams){if(!kzsdk.is_ios&&!kzsdk.is_android){prarams.errorCallback&&prarams.errorCallback({message:"设备不支持"});return}if(kzsdk.is_android){document.addEventListener("deviceready",prarams.readyCallback)}else{prarams.readyCallback()}};if(kzsdk.is_ios){(function(kzsdk){kzsdk.setTitle=function(params){window.webkit.messageHandlers.setTitle.postMessage(params.title)};kzsdk.setBarColor=function(params){window.webkit.messageHandlers.navBarColor.postMessage(params.color)};kzsdk.setBackClick=function(params){window._kz_set_back_callback={click_callback:params.callback};window.webkit.messageHandlers.setBackClick.postMessage(params.set)};kzsdk.share=function(params){window.webkit.messageHandlers.share.postMessage(params)};kzsdk.unread=function(params){window._kz_unread_callback={readCallback:params.callback};window.webkit.messageHandlers.unread.postMessage(params.unread)};kzsdk.setRevealMenu=function(){window._kz_set_reveal_menu_callback={reveal_callback:params.callback};window.webkit.messageHandlers.setRevealMenu.postMessage(params.set)};kzsdk.setLeftMenu=function(params){var actionNames=[];window._kz_set_left_menu_callback={actionsJSON:{},click:params.click};var actions=params.menuArray;for(var index in actions){var id=actions[index].id;var name=actions[index].name;var str='{"'+name+'":"'+id+'"}';var actionJSON=JSON.parse(str);window._kz_set_menu_callback.actionsJSON[name]=id;actionNames.push(name)}window.webkit.messageHandlers.setLeftMenu.postMessage(actionNames)};kzsdk.setMoreClick=function(params){window._kz_set_more_callback={click_callback:params.callback};window.webkit.messageHandlers.setMoreClick.postMessage(params)};kzsdk.setPageType=function(params){window.webkit.messageHandlers.pageType.postMessage(params.type)};kzsdk.wxLogin=function(params){window.webkit.messageHandlers.wxLogin.postMessage(params)};kzsdk.logout=function(params){window.webkit.messageHandlers.logout.postMessage(params.redirect)};kzsdk.wxPay=function(params){window.kz_wx_pay_callback={pay_callback:params.callback};window.webkit.messageHandlers.wxPay.postMessage(params)};kzsdk.scan=function(params){window.kz_scan_callback={success_callback:params.success,error_callback:params.error};window.webkit.messageHandlers.scan.postMessage(params)};kzsdk.wechatScan=function(params){window.webkit.messageHandlers.wechatScan.postMessage(params)};kzsdk.kzappjump=function(params){window.webkit.messageHandlers.kzappjump.postMessage(params)};kzsdk.setCommNav=function(params){window._kz_comm_callback={search:params.searchCallback,rightMenu:params.rightMenuCallback,leftLogo:params.leftLogoCallback};window.webkit.messageHandlers.setCommNav.postMessage({pageType:params.pageType,pageTitle:params.pageTitle,forumLogo:params.forumLogo})};kzsdk.nativePost=function(params){window._kz_nativePost_callback={success:params.successCallback,error:params.errorCallback};window.webkit.messageHandlers.nativePost.postMessage({postType:params.postType,forumId:params.forumId,topicId:params.topicId,parentId:params.parentId,placeholder:params.placeholder})};kzsdk.nativeVideo=function(params){window._kz_nativeVideo_callback={success:params.successCallback,error:params.errorCallback};window.webkit.messageHandlers.nativeVideo.postMessage({videoUrl:params.videoUrl})};kzsdk.scan=function(params){window.kz_scan_callback={scan_callback:params.callback};window.webkit.messageHandlers.scan.postMessage("")};kzsdk.showPictures=function(params){window.webkit.messageHandlers.showPictures.postMessage(params)};kzsdk.record=function(params){window.kz_record_callback={record_callback:params.callback};window.webkit.messageHandlers.record.postMessage("")};kzsdk.openShake=function(params){window.kz_open_shake_callback={open_shake_callback:params.callback};var tmp={};tmp.voiceOpen=params.voiceOpen;tmp.vibrateOpen=params.vibrateOpen;window.webkit.messageHandlers.openShake.postMessage(tmp)};kzsdk.videoOperate=function(params){window.kz_video_operate_callback={video_operate_callback:params.callback};var tmp={};tmp.operateType=params.operateType;window.webkit.messageHandlers.videoOperate.postMessage(tmp)};kzsdk.pictureOperate=function(params){window.kz_picture_operate_callback={picture_operate_callback:params.callback};var tmp={};tmp.operateType=params.operateType;window.webkit.messageHandlers.pictureOperate.postMessage(tmp)}})(kzsdk)}else{(function(kzsdk){kzsdk.wxLogin=function(params){window.location.href="warden://api/wxLogin?appid="+params.appid+"&redirect="+params.redirect};kzsdk.wxPay=function(params){window.location.href="warden://api/wxPay?appid="+params.appid+"&partnerid="+params.partnerid+"&prepayid="+params.prepayid+"&noncestr="+params.noncestr+"×tamp="+params.timestamp+"&sign="+params.sign};kzsdk.logout=function(params){window.location.href="warden://api/logout?redirect="+params.redirect};kzsdk.share=function(params){window.location.href="warden://api/share?title="+params.title+"&content="+params.content+"&link="+params.link+"&logo="+params.logo+"&trigger="+params.trigger};kzsdk.record=function(params){window.kz_record_callback=params.callback;window.location.href="warden://api/record?callback=kz_record_callback"};kzsdk.showPictures=function(params){window.location.href="warden://api/showPictures?startPicIndex="+params.startPicIndex+"&pictureUrls="+params.pictureUrls};kzsdk.openShake=function(params){window.openshake_callback=params.callback;window.location.href="warden://api/openShake?callback=openshake_callback&voiceOpen="+params.voiceOpen+"&vibrateOpen="+params.vibrateOpen};kzsdk.kzappjump=function(params){window.location.href="warden://api/kzappjump?params="+params}})(kzsdk)}(function(kzsdk){if(typeof define==="function"&&define.amd){define("kzsdk",[],function(){return kzsdk})}else{window.kzsdk=kzsdk}})(kzsdk)})(window);